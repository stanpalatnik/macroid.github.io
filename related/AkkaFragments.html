<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Akka Fragments | Macroid</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.2">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="macroid">
    
    
    <link rel="next" href="../https://groups.google.com/forum/#!forum/macroid" />
    
    
    <link rel="prev" href="../related/Viewable.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="macroid/macroid" data-level="8.2" data-basepath=".." data-revision="1406923991108">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/macroid/macroid" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/macroid/macroid/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/macroid/macroid/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Macroid</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/stanch" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/macroid/macroid/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        
        <li class="chapter " data-level="1" data-path="Installation.html">
            
                
                    <a href="../Installation.html">
                        <i class="fa fa-check"></i> <b>1.</b> Installation
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="ScalaOnAndroid.html">
            
                
                    <a href="../ScalaOnAndroid.html">
                        <i class="fa fa-check"></i> <b>1.1.</b> Scala on Android
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="Tutorial.html">
            
                
                    <a href="../Tutorial.html">
                        <i class="fa fa-check"></i> <b>2.</b> Tutorial
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="tutorial/BuildingLayouts.html">
            
                
                    <a href="../tutorial/BuildingLayouts.html">
                        <i class="fa fa-check"></i> <b>2.1.</b> Building layouts
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="tutorial/Tweaking.html">
            
                
                    <a href="../tutorial/Tweaking.html">
                        <i class="fa fa-check"></i> <b>2.2.</b> Tweaking widgets
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="tutorial/HandlingEvents.html">
            
                
                    <a href="../tutorial/HandlingEvents.html">
                        <i class="fa fa-check"></i> <b>2.3.</b> Handling events
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="tutorial/GettingAdaptive.html">
            
                
                    <a href="../tutorial/GettingAdaptive.html">
                        <i class="fa fa-check"></i> <b>2.4.</b> Getting adaptive
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="tutorial/CompleteCode.html">
            
                
                    <a href="../tutorial/CompleteCode.html">
                        <i class="fa fa-check"></i> <b>2.5.</b> Complete code
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="Guide.html">
            
                
                    <a href="../Guide.html">
                        <i class="fa fa-check"></i> <b>3.</b> Guide
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="guide/UiActions.html">
            
                
                    <a href="../guide/UiActions.html">
                        <i class="fa fa-check"></i> <b>3.1.</b> UI actions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="guide/Contexts.html">
            
                
                    <a href="../guide/Contexts.html">
                        <i class="fa fa-check"></i> <b>3.2.</b> Contexts
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="guide/Bricks.html">
            
                
                    <a href="../guide/Bricks.html">
                        <i class="fa fa-check"></i> <b>3.3.</b> Bricks
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4" data-path="guide/Tweaks.html">
            
                
                    <a href="../guide/Tweaks.html">
                        <i class="fa fa-check"></i> <b>3.4.</b> Tweaks
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.5" data-path="guide/Snails.html">
            
                
                    <a href="../guide/Snails.html">
                        <i class="fa fa-check"></i> <b>3.5.</b> Snails
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.6" data-path="guide/Transformers.html">
            
                
                    <a href="../guide/Transformers.html">
                        <i class="fa fa-check"></i> <b>3.6.</b> Transformers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.7" data-path="guide/Operators.html">
            
                
                    <a href="../guide/Operators.html">
                        <i class="fa fa-check"></i> <b>3.7.</b> Understanding operators
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.8" data-path="guide/MediaQueries.html">
            
                
                    <a href="../guide/MediaQueries.html">
                        <i class="fa fa-check"></i> <b>3.8.</b> Media queries
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.9" data-path="guide/Fragments.html">
            
                
                    <a href="../guide/Fragments.html">
                        <i class="fa fa-check"></i> <b>3.9.</b> Fragments
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.10" data-path="guide/Searching.html">
            
                
                    <a href="../guide/Searching.html">
                        <i class="fa fa-check"></i> <b>3.10.</b> Searching
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.11" data-path="guide/ToastsDialogs.html">
            
                
                    <a href="../guide/ToastsDialogs.html">
                        <i class="fa fa-check"></i> <b>3.11.</b> Toasts and dialogs
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.12" data-path="guide/Logging.html">
            
                
                    <a href="../guide/Logging.html">
                        <i class="fa fa-check"></i> <b>3.12.</b> Logging
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.13" data-path="guide/Advanced.html">
            
                
                    <a href="../guide/Advanced.html">
                        <i class="fa fa-check"></i> <b>3.13.</b> Advanced techniques
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.14" data-path="guide/Imports.html">
            
                
                    <a href="../guide/Imports.html">
                        <i class="fa fa-check"></i> <b>3.14.</b> Imports
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="Differences.html">
            
                
                    <a href="../Differences.html">
                        <i class="fa fa-check"></i> <b>4.</b> Differences from...
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="differences/Vanilla.html">
            
                
                    <a href="../differences/Vanilla.html">
                        <i class="fa fa-check"></i> <b>4.1.</b> Vanilla Android
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="differences/Scaloid.html">
            
                
                    <a href="../differences/Scaloid.html">
                        <i class="fa fa-check"></i> <b>4.2.</b> Scaloid
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="Recipes.html">
            
                
                    <a href="../Recipes.html">
                        <i class="fa fa-check"></i> <b>5.</b> Recipes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="Samples.html">
            
                
                    <a href="../Samples.html">
                        <i class="fa fa-check"></i> <b>6.</b> Sample projects
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="Talks.html">
            
                
                    <a href="../Talks.html">
                        <i class="fa fa-check"></i> <b>7.</b> Talks
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="Related.html">
            
                
                    <a href="../Related.html">
                        <i class="fa fa-check"></i> <b>8.</b> Related libraries
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="related/Viewable.html">
            
                
                    <a href="../related/Viewable.html">
                        <i class="fa fa-check"></i> <b>8.1.</b> Viewable
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="related/AkkaFragments.html">
            
                
                    <a href="../related/AkkaFragments.html">
                        <i class="fa fa-check"></i> <b>8.2.</b> Akka Fragments
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" >
            
                
                    <a target="_blank" href="https://groups.google.com/forum/#!forum/macroid">
                        <i class="fa fa-check"></i> <b>9.</b> Mailing list
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="Changelog.html">
            
                
                    <a href="../Changelog.html">
                        <i class="fa fa-check"></i> <b>10.</b> Changelog
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="api/macroid/package.html">
            
                
                    <a href="../api/macroid/package.html">
                        <i class="fa fa-check"></i> <b>11.</b> Scaladoc
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 91.42857142857143%;min-width: 88.57142857142857%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../Installation.html" title="Installation" class="chapter done new-chapter" data-progress="1" style="left: 2.857142857142857%;"></a>
    
        <a href="../ScalaOnAndroid.html" title="Scala on Android" class="chapter done " data-progress="1.1" style="left: 5.714285714285714%;"></a>
    
        <a href="../Tutorial.html" title="Tutorial" class="chapter done new-chapter" data-progress="2" style="left: 8.571428571428571%;"></a>
    
        <a href="../tutorial/BuildingLayouts.html" title="Building layouts" class="chapter done " data-progress="2.1" style="left: 11.428571428571429%;"></a>
    
        <a href="../tutorial/Tweaking.html" title="Tweaking widgets" class="chapter done " data-progress="2.2" style="left: 14.285714285714286%;"></a>
    
        <a href="../tutorial/HandlingEvents.html" title="Handling events" class="chapter done " data-progress="2.3" style="left: 17.142857142857142%;"></a>
    
        <a href="../tutorial/GettingAdaptive.html" title="Getting adaptive" class="chapter done " data-progress="2.4" style="left: 20%;"></a>
    
        <a href="../tutorial/CompleteCode.html" title="Complete code" class="chapter done " data-progress="2.5" style="left: 22.857142857142858%;"></a>
    
        <a href="../Guide.html" title="Guide" class="chapter done new-chapter" data-progress="3" style="left: 25.714285714285715%;"></a>
    
        <a href="../guide/UiActions.html" title="UI actions" class="chapter done " data-progress="3.1" style="left: 28.571428571428573%;"></a>
    
        <a href="../guide/Searching.html" title="Searching" class="chapter done " data-progress="3.10" style="left: 31.428571428571427%;"></a>
    
        <a href="../guide/ToastsDialogs.html" title="Toasts and dialogs" class="chapter done " data-progress="3.11" style="left: 34.285714285714285%;"></a>
    
        <a href="../guide/Logging.html" title="Logging" class="chapter done " data-progress="3.12" style="left: 37.142857142857146%;"></a>
    
        <a href="../guide/Advanced.html" title="Advanced techniques" class="chapter done " data-progress="3.13" style="left: 40%;"></a>
    
        <a href="../guide/Imports.html" title="Imports" class="chapter done " data-progress="3.14" style="left: 42.857142857142854%;"></a>
    
        <a href="../guide/Contexts.html" title="Contexts" class="chapter done " data-progress="3.2" style="left: 45.714285714285715%;"></a>
    
        <a href="../guide/Bricks.html" title="Bricks" class="chapter done " data-progress="3.3" style="left: 48.57142857142857%;"></a>
    
        <a href="../guide/Tweaks.html" title="Tweaks" class="chapter done " data-progress="3.4" style="left: 51.42857142857143%;"></a>
    
        <a href="../guide/Snails.html" title="Snails" class="chapter done " data-progress="3.5" style="left: 54.285714285714285%;"></a>
    
        <a href="../guide/Transformers.html" title="Transformers" class="chapter done " data-progress="3.6" style="left: 57.142857142857146%;"></a>
    
        <a href="../guide/Operators.html" title="Understanding operators" class="chapter done " data-progress="3.7" style="left: 60%;"></a>
    
        <a href="../guide/MediaQueries.html" title="Media queries" class="chapter done " data-progress="3.8" style="left: 62.857142857142854%;"></a>
    
        <a href="../guide/Fragments.html" title="Fragments" class="chapter done " data-progress="3.9" style="left: 65.71428571428571%;"></a>
    
        <a href="../Differences.html" title="Differences from..." class="chapter done new-chapter" data-progress="4" style="left: 68.57142857142857%;"></a>
    
        <a href="../differences/Vanilla.html" title="Vanilla Android" class="chapter done " data-progress="4.1" style="left: 71.42857142857143%;"></a>
    
        <a href="../differences/Scaloid.html" title="Scaloid" class="chapter done " data-progress="4.2" style="left: 74.28571428571429%;"></a>
    
        <a href="../Recipes.html" title="Recipes" class="chapter done new-chapter" data-progress="5" style="left: 77.14285714285714%;"></a>
    
        <a href="../Samples.html" title="Sample projects" class="chapter done new-chapter" data-progress="6" style="left: 80%;"></a>
    
        <a href="../Talks.html" title="Talks" class="chapter done new-chapter" data-progress="7" style="left: 82.85714285714286%;"></a>
    
        <a href="../Related.html" title="Related libraries" class="chapter done new-chapter" data-progress="8" style="left: 85.71428571428571%;"></a>
    
        <a href="../related/Viewable.html" title="Viewable" class="chapter done " data-progress="8.1" style="left: 88.57142857142857%;"></a>
    
        <a href="../related/AkkaFragments.html" title="Akka Fragments" class="chapter done " data-progress="8.2" style="left: 91.42857142857143%;"></a>
    
        <a href="../https://groups.google.com/forum/#!forum/macroid" title="Mailing list" class="chapter  new-chapter" data-progress="9" style="left: 94.28571428571429%;"></a>
    
        <a href="../Changelog.html" title="Changelog" class="chapter  " data-progress="10" style="left: 97.14285714285714%;"></a>
    
        <a href="../api/macroid/package.html" title="Scaladoc" class="chapter  " data-progress="11" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_28">
                    
                        <h2 id="akka-fragments">Akka Fragments</h2>
<p>This library contains some glue to setup message-passing between Android Fragments using <a href="http://akka.io" target="_blank">Akka</a>.</p>
<p>You have to add your version of Akka yourself (see below).</p>
<h3 id="how-to-use">How to use</h3>
<p>Add to your <code>bulid.sbt</code>:</p>
<pre><code class="lang-scala">libraryDependencies ++= Seq(
  <span class="hljs-comment">// this library</span>
  <span class="hljs-comment">// right now you have to `publish-local` it yourself</span>
  <span class="hljs-string">"org.macroid"</span> %% <span class="hljs-string">"macroid-akka-fragments"</span> % <span class="hljs-string">"2.0.0-M3"</span>,
  <span class="hljs-comment">// akka, if not included before</span>
  <span class="hljs-string">"com.typesafe.akka"</span> %% <span class="hljs-string">"akka-actor"</span> % <span class="hljs-string">"2.3.3"</span>
)

<span class="hljs-comment">// Proguard rules</span>
proguardOptions ++= Seq(
  <span class="hljs-string">"-keep class akka.actor.LightArrayRevolverScheduler { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.LocalActorRefProvider { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.CreatorFunctionConsumer { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.TypedCreatorFunctionConsumer { *; }"</span>,
  <span class="hljs-string">"-keep class akka.dispatch.BoundedDequeBasedMessageQueueSemantics { *; }"</span>,
  <span class="hljs-string">"-keep class akka.dispatch.UnboundedMessageQueueSemantics { *; }"</span>,
  <span class="hljs-string">"-keep class akka.dispatch.UnboundedDequeBasedMessageQueueSemantics { *; }"</span>,
  <span class="hljs-string">"-keep class akka.dispatch.DequeBasedMessageQueueSemantics { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.LocalActorRefProvider$Guardian { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.LocalActorRefProvider$SystemGuardian { *; }"</span>,
  <span class="hljs-string">"-keep class akka.dispatch.UnboundedMailbox { *; }"</span>,
  <span class="hljs-string">"-keep class akka.actor.DefaultSupervisorStrategy { *; }"</span>,
  <span class="hljs-string">"-keep class macroid.akkafragments.AkkaAndroidLogger { *; }"</span>,
  <span class="hljs-string">"-keep class akka.event.Logging$LogExt { *; }"</span>
)
</code></pre>
<p>Add to your <code>Activity</code>:</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> macroid.akkafragments.AkkaActivity

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> <span class="hljs-keyword">with</span> <span class="hljs-title">AkkaActivity</span> {</span>
  <span class="hljs-comment">// define actor system name</span>
  <span class="hljs-keyword">val</span> actorSystemName = <span class="hljs-string">"my-system"</span>

  <span class="hljs-comment">// use the provided actor system to create some actors</span>
  <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> actor1 = actorSystem.actorOf(..., ...)

  ...
}
</code></pre>
<p>Do not forget to call <code>actorSystem.shutdown()</code> when the activity is finished.</p>
<p>Now the idea is that we create an actor per each fragment. The actors will live as long as the activity lives.
The fragments, on the other hand, come and go, as they normally do. Thus our actors can be “attached” and “detached”
from the user interface they control.</p>
<p>Here is a fragment actor:</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> macroid.akkafragments.FragmentActor
<span class="hljs-keyword">import</span> macroid.util.Ui

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MyActor</span> {</span>
  <span class="hljs-comment">// this is a common Akka pattern: http://doc.akka.io/docs/akka/snapshot/scala/actors.html</span>
  <span class="hljs-comment">// IMPORTANT: notice how we use `new MyActor` and not `Props[MyActor]`</span>
  <span class="hljs-comment">// this forces Proguard to keep the class `MyActor`</span>
  <span class="hljs-comment">// you might add a Proguard rule as well though</span>
  <span class="hljs-keyword">def</span> props = Props(<span class="hljs-keyword">new</span> MyActor)
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyActor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FragmentActor</span>[<span class="hljs-title">MyFragment</span>] {</span>
  <span class="hljs-comment">// receiveUi handles attaching and detaching UI</span>
  <span class="hljs-comment">// and then (sic!) passes the message to us</span>
  <span class="hljs-keyword">def</span> receive = receiveUi andThen {
    <span class="hljs-keyword">case</span> MyMessage(x) ⇒ ...

    <span class="hljs-comment">// we can use `withUi`, which will provide us</span>
    <span class="hljs-comment">// with the currently attached fragment, if any</span>
    <span class="hljs-keyword">case</span> MyOtherMessage ⇒ withUi(fragment ⇒ Ui {
      <span class="hljs-comment">// code run on the Ui thread</span>
      <span class="hljs-comment">// more about Ui at http://macroid.github.io/guide/UiActions.html</span>
      ...
    })

    <span class="hljs-comment">// these two are already handled in receiveUi</span>
    <span class="hljs-comment">// but you can add your own behavior</span>
    <span class="hljs-keyword">case</span> FragmentActor.AttachUi(_) ⇒ 
    <span class="hljs-keyword">case</span> FragmentActor.DetachUi(_) ⇒
  }
}
</code></pre>
<p>Finally, a fragment:</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> android.support.v4.app.Fragment
<span class="hljs-keyword">import</span> macroid.akkafragments.AkkaFragment

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFragment</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Fragment</span> <span class="hljs-keyword">with</span> <span class="hljs-title">AkkaFragment</span> {</span>
  <span class="hljs-comment">// find the actor for this fragment</span>
  <span class="hljs-comment">// which we created in the Activity</span>
  <span class="hljs-comment">// if this fragment does not have a dedicated actor,</span>
  <span class="hljs-comment">// set to `None`</span>
  <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> actor = Some(actorSystem.actorSelection(<span class="hljs-string">"/user/actor1"</span>))

  ...
  <span class="hljs-comment">// `AkkaFragment` uses “stackable trait” pattern</span>
  <span class="hljs-comment">// (http://www.artima.com/scalazine/articles/stackable_trait_pattern.html)</span>
  <span class="hljs-comment">// to override `onStart` and `onStop` with attaching and detaching of the actor</span>
}
</code></pre>
<p>There is also an Android-compatible Akka logger. To use it, add to your <code>src/main/resources/application.conf</code>:</p>
<pre><code class="lang-javascript">akka {
  loggers = [<span class="hljs-string">"macroid.akkafragments.AkkaAndroidLogger"</span>]
}
</code></pre>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../related/Viewable.html" class="navigation navigation-prev " aria-label="Previous page: Viewable"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../https://groups.google.com/forum/#!forum/macroid" class="navigation navigation-next " aria-label="Next page: Mailing list"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"disqus":{"shortName":"macroid"},"ga":{"token":"UA-51095378-1"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-51095378-1', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
